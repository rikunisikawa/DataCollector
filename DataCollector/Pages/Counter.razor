@page "/input"
@using MudBlazor
@using DataCollector.Model

<MudTable Items="@Entries" Dense="true">
    <HeaderContent>
        @foreach (var item in MasterItems)
        {
            <MudTh>@item.Name</MudTh>
        }
    </HeaderContent>
    <RowTemplate Context="entry">
        @foreach (var item in MasterItems)
        {
            <MudTd>
                @if (item.Type == "文字")
                {
                    <MudTextField T="string" Value="@(entry.Values[item.Name]?.ToString())" ValueChanged="@(value => entry.Values[item.Name] = value)" />
                }
                else if (item.Type == "数字")
                {
                    <MudNumericField T="int" Value="@(Convert.ToInt32(entry.Values[item.Name]))" ValueChanged="@(value => entry.Values[item.Name] = value)" />
                }
            </MudTd>
        }
    </RowTemplate>
</MudTable>

@code {
    // private List<DynamicDataEntry> Entries = new List<DynamicDataEntry>();
    private List<DynamicDataEntry> Entries = new List<DynamicDataEntry>
    {
        new DynamicDataEntry { Values = { { "項目名", "商品A" }, { "数量", 100 }, { "日付", new DateTime(2024, 1, 1) } } },
        new DynamicDataEntry { Values = { { "項目名", "商品B" }, { "数量", 200 }, { "日付", new DateTime(2024, 1, 2) } } },
        new DynamicDataEntry { Values = { { "項目名", "商品C" }, { "数量", 300 }, { "日付", new DateTime(2024, 1, 3) } } }
    };
    // private List<MasterItem> MasterItems; // This should be fetched or observed from the master items management
    private List<MasterItem> MasterItems = new List<MasterItem>
    {
        new MasterItem { Id = 1, Name = "項目名", Type = "文字" },
        new MasterItem { Id = 2, Name = "数量", Type = "数字" },
        new MasterItem { Id = 3, Name = "日付", Type = "日" }
    };
    // Initialize or update data based on MasterItems
}
